{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\MASHATE\\\\Desktop\\\\JS\\\\React\\\\frontend\\\\src\\\\pages\\\\Driver\\\\Reservations.js\";\nimport React from \"react\";\nimport Header from '../../Partials/Driver/Header';\nimport axios from \"axios\";\nimport ResCard from \"../../utils/Driver/ResCard\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Reservations extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.componentDidMount = () => {\n      this.fetchRes();\n    };\n\n    this.fetchRes = () => {\n      axios({\n        method: \"GET\",\n        url: \"http://127.0.0.1:8080/EJB-Client/APIv1.0/reservations/\",\n        headers: {\n          \"Content-Type\": \"Application/json\"\n        }\n      }).then(res => {\n        if (res.status === 200) {\n          axios({\n            method: \"GET\",\n            url: \"http://127.0.0.1:8080/EJB-Client/APIv1.0/annonces/\",\n            headers: {\n              \"Content-Type\": \"Application/json\"\n            }\n          }).then(res2 => {\n            if (res2.status === 200) {\n              let liste = [];\n\n              for (let offer in res2.data) {\n                if (res2.data[offer].con === parseInt(this.state.con)) {\n                  liste.push(res2.data[offer].id_annonces);\n                }\n              }\n\n              let lst = [];\n\n              for (let reserv in res.data) {\n                if (liste.includes(res.data[reserv].id_annonces)) {\n                  lst.push(res.data[reserv]);\n                }\n              }\n\n              this.setState({\n                data: lst,\n                is_loaded: true\n              });\n            }\n          });\n        }\n      });\n    };\n\n    this.state = {\n      data: [],\n      con: sessionStorage.getItem(\"id_con\"),\n      is_loaded: false\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-full\",\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"header\", {\n        className: \"bg-white shadow\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8\",\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"text-3xl font-bold text-gray-900\",\n            children: \"Reservations\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n        className: \"mt-7 overflow-x-auto mx-auto \",\n        children: this.state.is_loaded ? this.state.data.map(item => /*#__PURE__*/_jsxDEV(ResCard, {\n          item: item\n        }, item.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 70\n        }, this)) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-center py-8\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"https://www.svgrepo.com/show/314685/spinner-solid.svg\",\n            className: \"animate-spin w-24 \",\n            alt: \" \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 153\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 111\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default Reservations;","map":{"version":3,"sources":["C:/Users/MASHATE/Desktop/JS/React/frontend/src/pages/Driver/Reservations.js"],"names":["React","Header","axios","ResCard","Reservations","Component","constructor","props","componentDidMount","fetchRes","method","url","headers","then","res","status","res2","liste","offer","data","con","parseInt","state","push","id_annonces","lst","reserv","includes","setState","is_loaded","sessionStorage","getItem","render","map","item","id"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport Header from '../../Partials/Driver/Header'\r\nimport axios from \"axios\";\r\nimport ResCard from \"../../utils/Driver/ResCard\";\r\n\r\n\r\n\r\n\r\nclass Reservations extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state={\r\n            data:[],\r\n            con: sessionStorage.getItem(\"id_con\"),\r\n            is_loaded: false\r\n        }\r\n    }\r\n\r\n    componentDidMount=()=>{\r\n        this.fetchRes()\r\n    }\r\n    fetchRes = () => {\r\n\r\n        axios({\r\n            method: \"GET\",\r\n            url: \"http://127.0.0.1:8080/EJB-Client/APIv1.0/reservations/\",\r\n            headers: { \"Content-Type\": \"Application/json\"},\r\n        }).then((res)=>{\r\n            if(res.status===200){\r\n                axios({\r\n                    method: \"GET\",\r\n                    url: \"http://127.0.0.1:8080/EJB-Client/APIv1.0/annonces/\",\r\n                    headers: { \"Content-Type\": \"Application/json\"},\r\n                }).then((res2)=>{\r\n                    if(res2.status===200){\r\n                        let liste=[]\r\n                        for (let offer in res2.data){\r\n                            if(res2.data[offer].con===parseInt(this.state.con)){\r\n                                liste.push(res2.data[offer].id_annonces)\r\n                            }\r\n                        }    \r\n                        let lst=[]\r\n                        for (let reserv in res.data){\r\n                            if(liste.includes(res.data[reserv].id_annonces)){\r\n                                lst.push(res.data[reserv])\r\n                            }\r\n                        }\r\n                        this.setState({\r\n                            data:lst,\r\n                            is_loaded: true\r\n                        })\r\n                }\r\n            })\r\n                \r\n                }\r\n            })\r\n\r\n      }\r\n    \r\n    \r\n    render() { \r\n        return ( \r\n            <div className=\"min-h-full\">\r\n            <Header />\r\n            <header className=\"bg-white shadow\">\r\n            <div className=\"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8\">\r\n                <h1 className=\"text-3xl font-bold text-gray-900\">Reservations</h1>\r\n            </div>\r\n            </header>\r\n            <main className=\"mt-7 overflow-x-auto mx-auto \">\r\n            \r\n            { this.state.is_loaded ?  this.state.data.map((item) => (<ResCard key={item.id} item={item}/>)) : <div className='flex justify-center py-8'><img src='https://www.svgrepo.com/show/314685/spinner-solid.svg' className='animate-spin w-24 ' alt=\" \" /></div> }\r\n\r\n            </main>\r\n\r\n\r\n            </div>\r\n         );\r\n    }\r\n}\r\n \r\nexport default Reservations;"]},"metadata":{},"sourceType":"module"}