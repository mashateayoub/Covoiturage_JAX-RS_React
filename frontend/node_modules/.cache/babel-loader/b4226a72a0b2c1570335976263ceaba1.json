{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\MASHATE\\\\Desktop\\\\JS\\\\React\\\\frontend\\\\src\\\\pages\\\\Reservations.js\";\nimport React from \"react\";\nimport ResponsiveNavBar from \"../Partials/Header\";\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Reservations extends React.Component {\n  constructor() {\n    super();\n\n    this.componentDidMount = () => {\n      this.fetchRes();\n    };\n\n    this.fetchRes = () => {\n      axios({\n        method: \"GET\",\n        url: \"http://127.0.0.1:8080/EJB-Client/APIv1.0/reservations/\",\n        headers: {\n          \"Content-Type\": \"Application/json\"\n        }\n      }).then(res => {\n        if (res.status === 200) {\n          axios({\n            method: \"GET\",\n            url: \"http://127.0.0.1:8080/EJB-Client/APIv1.0/annonces/\",\n            headers: {\n              \"Content-Type\": \"Application/json\"\n            }\n          }).then(res2 => {\n            if (res2.status === 200) {\n              let liste = [];\n\n              for (let offer in res2.data) {\n                if (res2.data[offer].con === parseInt(this.state.con)) {\n                  liste.push(res2.data[offer].id_annonces);\n                }\n              }\n\n              let lst = [];\n\n              for (let reserv in res.data) {\n                if (liste.includes(res.data[reserv].id_annonces)) {\n                  lst.push(res.data[reserv]);\n                }\n              }\n\n              this.setState({\n                data: lst,\n                is_loaded: true\n              });\n            }\n          });\n        }\n      });\n    };\n\n    this.state = {\n      data: [],\n      con: sessionStorage.getItem(\"id_con\"),\n      is_loaded: false\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col min-h-screen overflow-hidden\",\n      children: /*#__PURE__*/_jsxDEV(ResponsiveNavBar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default Reservations;","map":{"version":3,"sources":["C:/Users/MASHATE/Desktop/JS/React/frontend/src/pages/Reservations.js"],"names":["React","ResponsiveNavBar","axios","Reservations","Component","constructor","componentDidMount","fetchRes","method","url","headers","then","res","status","res2","liste","offer","data","con","parseInt","state","push","id_annonces","lst","reserv","includes","setState","is_loaded","sessionStorage","getItem","render"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,gBAAP,MAA6B,oBAA7B;AACA,OAAOC,KAAP,MAAkB,OAAlB;;;AAGA,MAAMC,YAAN,SAA2BH,KAAK,CAACI,SAAjC,CAA2C;AACvCC,EAAAA,WAAW,GAAG;AACV;;AADU,SASdC,iBATc,GASI,MAAI;AAClB,WAAKC,QAAL;AACH,KAXa;;AAAA,SAYdA,QAZc,GAYH,MAAM;AAEbL,MAAAA,KAAK,CAAC;AACFM,QAAAA,MAAM,EAAE,KADN;AAEFC,QAAAA,GAAG,EAAE,wDAFH;AAGFC,QAAAA,OAAO,EAAE;AAAE,0BAAgB;AAAlB;AAHP,OAAD,CAAL,CAIGC,IAJH,CAISC,GAAD,IAAO;AACX,YAAGA,GAAG,CAACC,MAAJ,KAAa,GAAhB,EAAoB;AAChBX,UAAAA,KAAK,CAAC;AACFM,YAAAA,MAAM,EAAE,KADN;AAEFC,YAAAA,GAAG,EAAE,oDAFH;AAGFC,YAAAA,OAAO,EAAE;AAAE,8BAAgB;AAAlB;AAHP,WAAD,CAAL,CAIGC,IAJH,CAISG,IAAD,IAAQ;AACZ,gBAAGA,IAAI,CAACD,MAAL,KAAc,GAAjB,EAAqB;AACjB,kBAAIE,KAAK,GAAC,EAAV;;AACA,mBAAK,IAAIC,KAAT,IAAkBF,IAAI,CAACG,IAAvB,EAA4B;AACxB,oBAAGH,IAAI,CAACG,IAAL,CAAUD,KAAV,EAAiBE,GAAjB,KAAuBC,QAAQ,CAAC,KAAKC,KAAL,CAAWF,GAAZ,CAAlC,EAAmD;AAC/CH,kBAAAA,KAAK,CAACM,IAAN,CAAWP,IAAI,CAACG,IAAL,CAAUD,KAAV,EAAiBM,WAA5B;AACH;AACJ;;AACD,kBAAIC,GAAG,GAAC,EAAR;;AACA,mBAAK,IAAIC,MAAT,IAAmBZ,GAAG,CAACK,IAAvB,EAA4B;AACxB,oBAAGF,KAAK,CAACU,QAAN,CAAeb,GAAG,CAACK,IAAJ,CAASO,MAAT,EAAiBF,WAAhC,CAAH,EAAgD;AAC5CC,kBAAAA,GAAG,CAACF,IAAJ,CAAST,GAAG,CAACK,IAAJ,CAASO,MAAT,CAAT;AACH;AACJ;;AACD,mBAAKE,QAAL,CAAc;AACVT,gBAAAA,IAAI,EAACM,GADK;AAEVI,gBAAAA,SAAS,EAAE;AAFD,eAAd;AAIP;AACJ,WAvBG;AAyBC;AACJ,OAhCL;AAkCD,KAhDW;;AAEV,SAAKP,KAAL,GAAW;AACPH,MAAAA,IAAI,EAAC,EADE;AAEPC,MAAAA,GAAG,EAAEU,cAAc,CAACC,OAAf,CAAuB,QAAvB,CAFE;AAGPF,MAAAA,SAAS,EAAE;AAHJ,KAAX;AAKH;;AA0CDG,EAAAA,MAAM,GAAG;AACL,wBACI;AAAK,MAAA,SAAS,EAAC,4CAAf;AAAA,6BAGA,QAAC,gBAAD;AAAA;AAAA;AAAA;AAAA;AAHA;AAAA;AAAA;AAAA;AAAA,YADJ;AAaH;;AAhEsC;;AAmE3C,eAAe3B,YAAf","sourcesContent":["import React from \"react\";\r\nimport ResponsiveNavBar from \"../Partials/Header\"\r\nimport axios from 'axios';\r\n\r\n\r\nclass Reservations extends React.Component {\r\n    constructor() {\r\n        super();\r\n        this.state={\r\n            data:[],\r\n            con: sessionStorage.getItem(\"id_con\"),\r\n            is_loaded: false\r\n        }\r\n    }\r\n\r\n    componentDidMount=()=>{\r\n        this.fetchRes()\r\n    }\r\n    fetchRes = () => {\r\n\r\n        axios({\r\n            method: \"GET\",\r\n            url: \"http://127.0.0.1:8080/EJB-Client/APIv1.0/reservations/\",\r\n            headers: { \"Content-Type\": \"Application/json\"},\r\n        }).then((res)=>{\r\n            if(res.status===200){\r\n                axios({\r\n                    method: \"GET\",\r\n                    url: \"http://127.0.0.1:8080/EJB-Client/APIv1.0/annonces/\",\r\n                    headers: { \"Content-Type\": \"Application/json\"},\r\n                }).then((res2)=>{\r\n                    if(res2.status===200){\r\n                        let liste=[]\r\n                        for (let offer in res2.data){\r\n                            if(res2.data[offer].con===parseInt(this.state.con)){\r\n                                liste.push(res2.data[offer].id_annonces)\r\n                            }\r\n                        }    \r\n                        let lst=[]\r\n                        for (let reserv in res.data){\r\n                            if(liste.includes(res.data[reserv].id_annonces)){\r\n                                lst.push(res.data[reserv])\r\n                            }\r\n                        }\r\n                        this.setState({\r\n                            data:lst,\r\n                            is_loaded: true\r\n                        })\r\n                }\r\n            })\r\n                \r\n                }\r\n            })\r\n\r\n      }\r\n    render() { \r\n        return (\r\n            <div className=\"flex flex-col min-h-screen overflow-hidden\">\r\n\r\n            {/*  Site header */}\r\n            <ResponsiveNavBar />\r\n\r\n            {/*  Page content */}\r\n            \r\n\r\n            {/*  Site footer */}\r\n\r\n            </div>\r\n        );\r\n    }\r\n}\r\n \r\nexport default Reservations;"]},"metadata":{},"sourceType":"module"}